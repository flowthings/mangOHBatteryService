version: 1.0
sandboxed: false
start: manual

executables:
{
    batteryService = ( batteryServiceComponent )
}

requires:
{
    configTree:
    {
        [rw] .
    }

    file:
    {
        /sys/devices/i2c-0/i2c-2/2-006b/power_supply/bq24190-charger/health     /sys/devices/i2c-0/i2c-2/2-006b/power_supply/bq24190-charger/
        /sys/devices/i2c-0/i2c-2/2-006b/power_supply/bq24190-battery/status     /sys/devices/i2c-0/i2c-2/2-006b/power_supply/bq24190-battery/
        /sys/devices/i2c-0/i2c-2/2-0064/power_supply/LTC2942/voltage_now        /sys/devices/i2c-0/i2c-2/2-0064/power_supply/LTC2942/
        /sys/devices/i2c-0/i2c-2/2-0064/power_supply/LTC2942/temp               /sys/devices/i2c-0/i2c-2/2-0064/power_supply/LTC2942/
        /sys/devices/i2c-0/i2c-2/2-0064/power_supply/LTC2942/charge_now         /sys/devices/i2c-0/i2c-2/2-0064/power_supply/LTC2942/
        /sys/devices/i2c-0/i2c-2/2-0064/power_supply/LTC2942/charge_counter     /sys/devices/i2c-0/i2c-2/2-0064/power_supply/LTC2942/
    }
}


processes:
{
    envVars:
    {
	LE_LOG_LEVEL = INFO
    }
    run:
    {
        ( batteryService )
    }
    faultAction: stopApp
}

extern:
{
    batteryService.batteryServiceComponent.ma_battery
    batteryService.batteryServiceComponent.ma_adminbattery
}

bindings:
{
    batteryService.batteryServiceComponent.dhubIO -> dataHub.io
}
